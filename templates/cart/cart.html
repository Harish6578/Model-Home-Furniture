{% extends "base/base.html" %}
{% load static %}

{% block content %}

<div class="container mt-4">
  <h3 class="mb-4">Shopping Cart</h3>

  <div id="cart-items">

    {% for item in cart_items %}
    <div class="cart-item">

      <!-- Product Image -->
      {% if item.product.thumbnail %}
        <img src="{{ item.product.thumbnail.url }}"
             class="cart-img"
             alt="{{ item.product.title }}">
      {% else %}
        <div class="cart-img placeholder-img">No Image</div>
      {% endif %}

      <!-- Product Info -->
      <div class="cart-info">
        <h6>{{ item.product.title }}</h6>
        <p class="text-muted">
          ₹{{ item.product.price }} ×
          <span id="qty-{{ item.id }}">{{ item.quantity }}</span>
        </p>
        <strong>
          ₹<span id="item-total-{{ item.id }}">
            {{ item.product.price|floatformat:0|add:item.quantity }}
          </span>
        </strong>
      </div>

      <!-- Quantity Buttons -->
      <div class="qty-box">
        <button class="qty-btn"
                onclick="updateQty('{{ item.id }}', 'decrease')">−</button>

        <span>{{ item.quantity }}</span>

        <button class="qty-btn"
                onclick="updateQty('{{ item.id }}', 'increase')">+</button>
      </div>

      <!-- Remove -->
      <button class="remove-btn"
              onclick="removeItem('{{ item.id }}')">
        Remove
      </button>

    </div>
    {% empty %}
      <p>Your cart is empty.</p>
    {% endfor %}

  </div>

  <hr>

  <h4 class="text-end">
    Total: ₹ <span id="cart-total">{{ cart_total }}</span>
  </h4>
</div>

<script src="{% static 'js/cart.js' %}"></script>
{% endblock %}
